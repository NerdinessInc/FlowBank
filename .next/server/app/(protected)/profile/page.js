(()=>{var e={};e.id=551,e.ids=[551],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},34489:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>c,pages:()=>u,routeModule:()=>p,tree:()=>d}),s(27835),s(34896),s(35866),s(70622);var r=s(23191),n=s(88716),i=s(37922),o=s.n(i),a=s(95231),l={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);s.d(t,l);let d=["",{children:["(protected)",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,27835)),"/Users/laurent/Documents/Nerdiness/flow_bank/app/(protected)/profile/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,34896)),"/Users/laurent/Documents/Nerdiness/flow_bank/app/(protected)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,70622)),"/Users/laurent/Documents/Nerdiness/flow_bank/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["/Users/laurent/Documents/Nerdiness/flow_bank/app/(protected)/profile/page.tsx"],c="/(protected)/profile/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(protected)/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},40731:(e,t,s)=>{Promise.resolve().then(s.bind(s,94093))},94093:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(10326),n=s(74064),i=s(17577),o=s(74723),a=s(27256),l=s(94215),d=s(10119),u=s(90772),c=s(29270),m=s(54432),p=s(71185);function h(){let{toast:e}=(0,l.pm)(),[t,s]=(0,i.useState)(1),h=a.z.object({username:a.z.string().min(1,"Please enter your username"),accessCode:a.z.string().min(1,"Please enter your access code"),oldPassword:a.z.string().min(1,"Please enter your old password"),newPassword:a.z.string().min(1,"Please enter your new password"),confirmPassword:a.z.string().min(1,"Please confirm your new password")}).refine(e=>e.newPassword===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),x=(0,o.cI)({defaultValues:{username:"",accessCode:"",oldPassword:"",newPassword:"",confirmPassword:""},resolver:(0,n.F)(h),mode:"onChange"}),{handleSubmit:f,control:w,trigger:b}=x,g=async()=>{await b({1:["username","accessCode"],2:["oldPassword"],3:["newPassword","confirmPassword"]}[t])&&s(e=>Math.min(e+1,3))},{mutate:y,isPending:j}=(0,d.D)({mutationFn:e=>(0,p.Cp)(e),onSuccess:t=>{console.log(t),t.success?e({title:"Password changed successfully!"}):e({title:"Failed to change password.",variant:"destructive"})}}),v=async e=>{console.log(e),y({username:e.username,accessCode:e.accessCode,newPassword:e.newPassword})};return(0,r.jsxs)("main",{className:"h-full w-full flex flex-col gap-6 items-center md:justify-center",children:[r.jsx("h2",{className:"font-semibold text-2xl",children:"Change User's Password"}),(0,r.jsxs)("div",{className:"w-full text-center mb-4",children:[(0,r.jsxs)("h3",{className:"text-lg",children:["Step ",t," of 3"]}),(0,r.jsxs)("p",{className:"text-gray-600",children:[1===t&&"Enter your username and full name",2===t&&"Enter your old password",3===t&&"Enter and confirm your new password"]})]}),r.jsx(c.l0,{...x,children:(0,r.jsxs)("form",{onSubmit:f(v),className:"w-[90%] md:w-2/3 grid grid-cols-1 gap-4 border border-border rounded-md p-6",children:[1===t&&(0,r.jsxs)(r.Fragment,{children:[r.jsx(c.Wi,{control:w,name:"username",render:({field:e})=>(0,r.jsxs)(c.xJ,{children:[r.jsx(c.lX,{children:"Username"}),r.jsx(c.NI,{children:r.jsx(m.I,{...e,placeholder:"Enter your username"})}),r.jsx(c.zG,{})]})}),r.jsx(c.Wi,{control:w,name:"accessCode",render:({field:e})=>(0,r.jsxs)(c.xJ,{children:[r.jsx(c.lX,{children:"Access Code"}),r.jsx(c.NI,{children:r.jsx(m.I,{...e,placeholder:"Enter your access code"})}),r.jsx(c.zG,{})]})})]}),2===t&&r.jsx(c.Wi,{control:w,name:"oldPassword",render:({field:e})=>(0,r.jsxs)(c.xJ,{children:[r.jsx(c.lX,{children:"Old Password"}),r.jsx(c.NI,{children:r.jsx(m.I,{...e,type:"password",placeholder:"Enter your old password"})}),r.jsx(c.zG,{})]})}),3===t&&(0,r.jsxs)(r.Fragment,{children:[r.jsx(c.Wi,{control:w,name:"newPassword",render:({field:e})=>(0,r.jsxs)(c.xJ,{children:[r.jsx(c.lX,{children:"New Password"}),r.jsx(c.NI,{children:r.jsx(m.I,{...e,type:"password",placeholder:"Enter your new password"})}),r.jsx(c.zG,{})]})}),r.jsx(c.Wi,{control:w,name:"confirmPassword",render:({field:e})=>(0,r.jsxs)(c.xJ,{children:[r.jsx(c.lX,{children:"Confirm Password"}),r.jsx(c.NI,{children:r.jsx(m.I,{...e,type:"password",placeholder:"Confirm your new password"})}),r.jsx(c.zG,{})]})})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[t>1&&r.jsx(u.z,{type:"button",onClick:()=>{s(e=>Math.max(e-1,1))},variant:"outline",children:"Back"}),t<3&&r.jsx(u.z,{type:"button",className:"ml-auto",onClick:g,children:"Next"}),3===t&&r.jsx(u.z,{type:"submit",className:"ml-auto",children:j?"...":"Change Password"})]})]})})]})}},29270:(e,t,s)=>{"use strict";s.d(t,{l0:()=>c,NI:()=>b,Wi:()=>p,xJ:()=>f,lX:()=>w,zG:()=>g});var r=s(10326),n=s(17577),i=s(34214),o=s(74723),a=s(77863),l=s(34478);let d=(0,s(28671).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=n.forwardRef(({className:e,...t},s)=>r.jsx(l.f,{ref:s,className:(0,a.cn)(d(),e),...t}));u.displayName=l.f.displayName;let c=o.RV,m=n.createContext({}),p=({...e})=>r.jsx(m.Provider,{value:{name:e.name},children:r.jsx(o.Qr,{...e})}),h=()=>{let e=n.useContext(m),t=n.useContext(x),{getFieldState:s,formState:r}=(0,o.Gc)(),i=s(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:a}=t;return{id:a,name:e.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...i}},x=n.createContext({}),f=n.forwardRef(({className:e,...t},s)=>{let i=n.useId();return r.jsx(x.Provider,{value:{id:i},children:r.jsx("div",{ref:s,className:(0,a.cn)("space-y-2",e),...t})})});f.displayName="FormItem";let w=n.forwardRef(({className:e,...t},s)=>{let{error:n,formItemId:i}=h();return r.jsx(u,{ref:s,className:(0,a.cn)(n&&"text-destructive",e),htmlFor:i,...t})});w.displayName="FormLabel";let b=n.forwardRef(({...e},t)=>{let{error:s,formItemId:n,formDescriptionId:o,formMessageId:a}=h();return r.jsx(i.g7,{ref:t,id:n,"aria-describedby":s?`${o} ${a}`:`${o}`,"aria-invalid":!!s,...e})});b.displayName="FormControl",n.forwardRef(({className:e,...t},s)=>{let{formDescriptionId:n}=h();return r.jsx("p",{ref:s,id:n,className:(0,a.cn)("text-sm text-muted-foreground",e),...t})}).displayName="FormDescription";let g=n.forwardRef(({className:e,children:t,...s},n)=>{let{error:i,formMessageId:o}=h(),l=i?String(i?.message):t;return l?r.jsx("p",{ref:n,id:o,className:(0,a.cn)("text-sm font-medium text-destructive",e),...s,children:l}):null});g.displayName="FormMessage"},54432:(e,t,s)=>{"use strict";s.d(t,{I:()=>o});var r=s(10326),n=s(17577),i=s(77863);let o=n.forwardRef(({className:e,type:t,...s},n)=>r.jsx("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...s}));o.displayName="Input"},27835:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`/Users/laurent/Documents/Nerdiness/flow_bank/app/(protected)/profile/page.tsx#default`)},10119:(e,t,s)=>{"use strict";s.d(t,{D:()=>c});var r=s(17577),n=s(71180),i=s(12113),o=s(64351),a=s(3341),l=class extends o.l{#e;#t=void 0;#s;#r;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,a.VS)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,a.Ym)(t.mutationKey)!==(0,a.Ym)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#n(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#n(),this.#i()}mutate(e,t){return this.#r=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#n(){let e=this.#s?.state??(0,n.R)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#i(e){i.V.batch(()=>{if(this.#r&&this.hasListeners()){let t=this.#t.variables,s=this.#t.context;e?.type==="success"?(this.#r.onSuccess?.(e.data,t,s),this.#r.onSettled?.(e.data,null,t,s)):e?.type==="error"&&(this.#r.onError?.(e.error,t,s),this.#r.onSettled?.(void 0,e.error,t,s))}this.listeners.forEach(e=>{e(this.#t)})})}},d=s(44976),u=s(78613);function c(e,t){let s=(0,d.NL)(t),[n]=r.useState(()=>new l(s,e));r.useEffect(()=>{n.setOptions(e)},[n,e]);let o=r.useSyncExternalStore(r.useCallback(e=>n.subscribe(i.V.batchCalls(e)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),a=r.useCallback((e,t)=>{n.mutate(e,t).catch(u.Z)},[n]);if(o.error&&(0,u.L)(n.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:a,mutateAsync:o.mutate}}},78613:(e,t,s)=>{"use strict";function r(e,t){return"function"==typeof e?e(...t):!!e}function n(){}s.d(t,{L:()=>r,Z:()=>n})}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,511,957,171,908,298,833,185],()=>s(34489));module.exports=r})();