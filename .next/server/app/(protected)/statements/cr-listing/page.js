(()=>{var e={};e.id=363,e.ids=[363],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},83547:e=>{"use strict";e.exports=import("@react-pdf/renderer")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},66043:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>o}),s(61120),s(34896),s(35866),s(70622);var r=s(23191),n=s(88716),a=s(37922),l=s.n(a),i=s(95231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);s.d(t,c);let o=["",{children:["(protected)",{children:["statements",{children:["cr-listing",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,61120)),"/Users/laurent/Documents/Nerdiness/flow_bank/app/(protected)/statements/cr-listing/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,34896)),"/Users/laurent/Documents/Nerdiness/flow_bank/app/(protected)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,70622)),"/Users/laurent/Documents/Nerdiness/flow_bank/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/Users/laurent/Documents/Nerdiness/flow_bank/app/(protected)/statements/cr-listing/page.tsx"],u="/(protected)/statements/cr-listing/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(protected)/statements/cr-listing/page",pathname:"/statements/cr-listing",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},40586:(e,t,s)=>{Promise.resolve().then(s.bind(s,62798))},62798:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>C});var n=s(10326),a=s(2453),l=s(17577),i=s(83547),c=s(74064),o=s(74723),d=s(27256),u=s(31215),x=s(14412),p=s(10119),h=s(13192),m=s(70581),j=s(19864),f=s(90772),g=s(54432),y=s(33071),_=s(29270),D=s(15940),N=s(34474),b=s(29275),v=s(89139),w=s(71185),P=e([i,j]);function C(){let{userData:e}=(0,v.U)(),[t,s]=(0,l.useState)([]),[r,P]=(0,l.useState)([]),{data:C,isLoading:A}=(0,x.a)({queryKey:["my-accounts"],queryFn:()=>(0,w.Bz)(2,e?.userRec,e?.acctCollection?.AcctStruct),enabled:!!e?.acctCollection?.AcctStruct}),q=d.z.object({account:d.z.string().min(1,"Please enter your account"),startDate:d.z.string({required_error:"Please enter the start date"}),endDate:d.z.string({required_error:"Please enter the end date"})}),T=(0,o.cI)({defaultValues:{account:"",startDate:"",endDate:""},resolver:(0,c.F)(q),mode:"onChange"}),{handleSubmit:S,control:O}=T,{mutate:E,isPending:k}=(0,p.D)({mutationFn:e=>(0,w.yq)(e.account,e.startDate,e.endDate),onSuccess:e=>{let t=e.data.filter(e=>"CR"===e.COD_DRCR);s(t),P(t.slice(0,10))}}),z=async e=>{let t={...e,startDate:(0,a.WU)(new Date(e.startDate),"yyyy-MM-dd"),endDate:(0,a.WU)(new Date(e.endDate),"yyyy-MM-dd")};E(t)};return A?n.jsx(h.g,{}):(0,n.jsxs)("main",{className:"h-full w-full flex flex-col gap-6 items-center md:justify-center",children:[n.jsx("h2",{className:"text-2xl font-bold",children:"CR Listing"}),0===t.length&&n.jsx(_.l0,{...T,children:(0,n.jsxs)("form",{onSubmit:S(z),className:"space-y-3 w-[90%] md:w-1/2 border border-border rounded-md p-6",children:[n.jsx(_.Wi,{control:O,name:"account",render:({field:e})=>(0,n.jsxs)(_.xJ,{children:[n.jsx(_.lX,{children:"Source Account"}),n.jsx(_.NI,{children:(0,n.jsxs)(N.Ph,{onValueChange:e.onChange,value:e.value,children:[n.jsx(N.i4,{children:n.jsx(N.ki,{placeholder:"Select Source Account"})}),n.jsx(N.Bw,{children:C?.data?.map((e,t)=>n.jsxs(N.Ql,{value:e.accountNumber,children:[e.accountNumber," -"," ",b.x(e.bookBalance)]},t))})]})}),n.jsx(_.zG,{})]})}),n.jsx(_.Wi,{control:O,name:"startDate",render:({field:e})=>(0,n.jsxs)(_.xJ,{className:"flex flex-col w-full",children:[n.jsx(_.lX,{children:"Start Date"}),n.jsx(g.I,{...e,placeholder:"Enter your start date",type:"date"}),n.jsx(_.zG,{})]})}),n.jsx(_.Wi,{control:O,name:"endDate",render:({field:e})=>(0,n.jsxs)(_.xJ,{className:"flex flex-col w-full",children:[n.jsx(_.lX,{children:"End Date"}),n.jsx(g.I,{...e,placeholder:"Enter your end date",type:"date"}),n.jsx(_.zG,{})]})}),n.jsx(f.z,{type:"submit",className:"w-full",disabled:k,children:"Submit"})]})}),t.length>0&&(0,n.jsxs)("div",{className:"w-full text-center mb-4",children:[(0,n.jsxs)(y.Zb,{children:[(0,n.jsxs)(y.Ol,{children:[n.jsx(y.ll,{children:"Statement Details"}),n.jsx(i.PDFDownloadLink,{document:n.jsx(j.R,{accountHistory:t}),fileName:`Statement ${t[0].COD_ACCT_NO}.pdf`,children:(0,n.jsxs)(f.z,{className:"flex gap-2 items-center font-bold",children:["Download",n.jsx(u.Z,{className:"h-4 w-4"})]})})]}),(0,n.jsxs)(y.aY,{children:[(0,n.jsxs)("div",{className:"w-full flex justify-between my-6",children:[(0,n.jsxs)("div",{className:"flex flex-col items-start",children:[(0,n.jsxs)("p",{children:["Account No: ",t[0].COD_ACCT_NO]}),(0,n.jsxs)("p",{children:["Opening Balance:"," ",(0,b.x)(t[0].OPENING_BAL)]}),(0,n.jsxs)("p",{children:["Available Balance:"," ",(0,b.x)(t[0].CLOSING_BAL)]}),(0,n.jsxs)("p",{children:["Account Type: ",t[0].NAM_PRODUCT]}),(0,n.jsxs)("p",{children:["Statement Period: ",t[0].pSTART_DATE," -"," ",t[0].END_DATE]}),(0,n.jsxs)("p",{children:["Total Transactions: ",t.length]})]}),(0,n.jsxs)("div",{className:"flex flex-col items-end",children:[n.jsx("p",{children:t[0].NAM_CUST_FULL}),n.jsx("p",{children:t[0].address})]})]}),(0,n.jsxs)(D.iA,{children:[n.jsx(D.xD,{children:(0,n.jsxs)(D.SC,{children:[n.jsx(D.ss,{children:"Account Number"}),n.jsx(D.ss,{children:"Transaction Date"}),n.jsx(D.ss,{children:"Transaction Amount"}),n.jsx(D.ss,{children:"Narration"})]})}),n.jsx(D.RM,{className:"text-left",children:r.map((e,t)=>(0,n.jsxs)(D.SC,{children:[n.jsx(D.pj,{children:e.COD_ACCT_NO}),n.jsx(D.pj,{children:e.DAT_TXN}),n.jsx(D.pj,{children:(0,b.x)(e.AMT_TXN)}),n.jsx(D.pj,{children:e.TXT_TXN_DESC})]},t))})]})]})]}),n.jsx("div",{className:"float-right my-3",children:n.jsx(m._,{totalItems:t?.length,onPageChange:e=>{let s=(e-1)*10,r=t?.slice(s,s+10);P(r)}})})]})]})}[i,j]=P.then?(await P)():P,r()}catch(e){r(e)}})},61120:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`/Users/laurent/Documents/Nerdiness/flow_bank/app/(protected)/statements/cr-listing/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,511,957,171,908,412,21,298,833,185,27],()=>s(66043));module.exports=r})();