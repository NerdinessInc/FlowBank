(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[819],{8998:function(e,l,n){Promise.resolve().then(n.bind(n,2987))},2987:function(e,l,n){"use strict";n.r(l),n.d(l,{default:function(){return A}});var s=n(7437),t=n(6235),c=n(2265),r=n(7312),a=n(1014),d=n(9343),i=n(9772),o=n(9061),x=n(932),u=n(5524),h=n(7651),j=n(3043),m=n(4290),f=n(495),N=n(3102),D=n(6013),p=n(6661),v=n(6975),y=n(6294),_=n(4058),C=n(4194),b=n(8415);function A(){var e;let{userData:l}=(0,C.U)(),[n,A]=(0,c.useState)([]),[T,g]=(0,c.useState)([]),{data:S,isLoading:w}=(0,x.a)({queryKey:["my-accounts"],queryFn:()=>{var e;return(0,b.Bz)(2,null==l?void 0:l.userRec,null==l?void 0:null===(e=l.acctCollection)||void 0===e?void 0:e.AcctStruct)},enabled:!!(null==l?void 0:null===(e=l.acctCollection)||void 0===e?void 0:e.AcctStruct)}),O=i.z.object({account:i.z.string().min(1,"Please enter your account"),startDate:i.z.string({required_error:"Please enter the start date"}),endDate:i.z.string({required_error:"Please enter the end date"})}),E=(0,d.cI)({defaultValues:{account:"",startDate:"",endDate:""},resolver:(0,a.F)(O),mode:"onChange"}),{handleSubmit:z,control:P}=E,{mutate:R,isPending:M}=(0,u.D)({mutationFn:e=>(0,b.yq)(e.account,e.startDate,e.endDate),onSuccess:e=>{let l=e.data.filter(e=>"DR"===e.COD_DRCR);A(l),g(l.slice(0,10))}}),B=async e=>{R({...e,startDate:(0,t.WU)(new Date(e.startDate),"yyyy-MM-dd"),endDate:(0,t.WU)(new Date(e.endDate),"yyyy-MM-dd")})};return w?(0,s.jsx)(h.g,{}):(0,s.jsxs)("main",{className:"h-full w-full flex flex-col gap-6 items-center md:justify-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold",children:"DR Listing"}),0===n.length&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(p.l0,{...E,children:(0,s.jsxs)("form",{onSubmit:z(B),className:"space-y-3 w-[90%] md:w-1/2 border border-border rounded-md p-6",children:[(0,s.jsx)(p.Wi,{control:P,name:"account",render:e=>{var l;let{field:n}=e;return(0,s.jsxs)(p.xJ,{children:[(0,s.jsx)(p.lX,{children:"Select Account"}),(0,s.jsx)(p.NI,{children:(0,s.jsxs)(y.Ph,{value:n.value,onValueChange:n.onChange,children:[(0,s.jsx)(y.i4,{children:(0,s.jsx)(y.ki,{placeholder:"Select account"})}),(0,s.jsx)(y.Bw,{children:null==S?void 0:null===(l=S.data)||void 0===l?void 0:l.map((e,l)=>(0,s.jsxs)(y.Ql,{value:e.accountNumber,children:[e.accountNumber," -"," ",(0,_.x)(e.bookBalance)]},l))})]})}),(0,s.jsx)(p.zG,{})]})}}),(0,s.jsx)(p.Wi,{control:P,name:"startDate",render:e=>{let{field:l}=e;return(0,s.jsxs)(p.xJ,{className:"flex flex-col w-full",children:[(0,s.jsx)(p.lX,{children:"Start Date"}),(0,s.jsx)(N.I,{...l,placeholder:"Enter your start date",type:"date"}),(0,s.jsx)(p.zG,{})]})}}),(0,s.jsx)(p.Wi,{control:P,name:"endDate",render:e=>{let{field:l}=e;return(0,s.jsxs)(p.xJ,{className:"flex flex-col w-full",children:[(0,s.jsx)(p.lX,{children:"End Date"}),(0,s.jsx)(N.I,{...l,placeholder:"Enter your end date",type:"date"}),(0,s.jsx)(p.zG,{})]})}}),(0,s.jsx)(f.z,{type:"submit",className:"w-full",disabled:M,children:"Submit"})]})})}),n.length>0&&(0,s.jsxs)("div",{className:"w-full text-center mb-4",children:[(0,s.jsxs)(D.Zb,{children:[(0,s.jsxs)(D.Ol,{children:[(0,s.jsx)(D.ll,{children:"Statement Details"}),(0,s.jsx)(r.WD,{document:(0,s.jsx)(m.R,{accountHistory:n}),fileName:"Statement ".concat(n[0].COD_ACCT_NO,".pdf"),children:(0,s.jsxs)(f.z,{className:"flex gap-2 items-center font-bold",children:["Download",(0,s.jsx)(o.Z,{className:"h-4 w-4"})]})})]}),(0,s.jsxs)(D.aY,{children:[(0,s.jsxs)("div",{className:"w-full flex justify-between my-6",children:[(0,s.jsxs)("div",{className:"flex flex-col items-start",children:[(0,s.jsxs)("p",{children:["Account No: ",n[0].COD_ACCT_NO]}),(0,s.jsxs)("p",{children:["Opening Balance:"," ",(0,_.x)(n[0].OPENING_BAL)]}),(0,s.jsxs)("p",{children:["Available Balance:"," ",(0,_.x)(n[0].CLOSING_BAL)]}),(0,s.jsxs)("p",{children:["Account Type: ",n[0].NAM_PRODUCT]}),(0,s.jsxs)("p",{children:["Statement Period: ",n[0].pSTART_DATE," -"," ",n[0].END_DATE]}),(0,s.jsxs)("p",{children:["Total Transactions: ",n.length]})]}),(0,s.jsxs)("div",{className:"flex flex-col items-end",children:[(0,s.jsx)("p",{children:n[0].NAM_CUST_FULL}),(0,s.jsx)("p",{children:n[0].address})]})]}),(0,s.jsxs)(v.iA,{children:[(0,s.jsx)(v.xD,{children:(0,s.jsxs)(v.SC,{children:[(0,s.jsx)(v.ss,{children:"Account Number"}),(0,s.jsx)(v.ss,{children:"Transaction Date"}),(0,s.jsx)(v.ss,{children:"Transaction Amount"}),(0,s.jsx)(v.ss,{children:"Narration"})]})}),(0,s.jsx)(v.RM,{className:"text-left",children:T.map((e,l)=>(0,s.jsxs)(v.SC,{children:[(0,s.jsx)(v.pj,{children:e.COD_ACCT_NO}),(0,s.jsx)(v.pj,{children:e.DAT_TXN}),(0,s.jsx)(v.pj,{children:(0,_.x)(e.AMT_TXN)}),(0,s.jsx)(v.pj,{children:e.TXT_TXN_DESC})]},l))})]})]})]}),(0,s.jsx)("div",{className:"float-right my-3",children:(0,s.jsx)(j._,{totalItems:null==n?void 0:n.length,onPageChange:e=>{let l=(e-1)*10;g(null==n?void 0:n.slice(l,l+10))}})})]})]})}}},function(e){e.O(0,[8218,249,7448,7282,4868,9300,4469,6059,2576,5815,7860,6235,7397,8415,6905,2971,7023,1744],function(){return e(e.s=8998)}),_N_E=e.O()}]);