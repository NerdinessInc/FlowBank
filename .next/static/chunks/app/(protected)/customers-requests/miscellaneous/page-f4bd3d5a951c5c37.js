(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3745],{1392:function(e,t,s){Promise.resolve().then(s.bind(s,1949))},1949:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var n=s(7437),a=s(2265),r=s(6235),i=s(1014),o=s(9343),u=s(9772),c=s(932),l=s(5524),d=s(7651),m=s(495),h=s(6661),f=s(3146),p=s(6294),g=s(4194),x=s(4058),y=s(8415);function b(){var e;let{userData:t}=(0,g.U)(),[s,b]=(0,a.useState)(null);(0,a.useEffect)(()=>{!async function(){let e=await fetch("/api/getSessionId");e.ok?b((await e.json()).sessionID):console.error("Failed to fetch session ID")}()},[]);let{data:v,isLoading:w}=(0,c.a)({queryKey:["my-accounts"],queryFn:()=>{var e;return(0,y.Bz)(2,null==t?void 0:t.userRec,null==t?void 0:null===(e=t.acctCollection)||void 0===e?void 0:e.AcctStruct)},enabled:!!(null==t?void 0:null===(e=t.acctCollection)||void 0===e?void 0:e.AcctStruct)}),{mutate:N,isPending:j}=(0,l.D)({mutationFn:e=>(0,y.wg)(e),onSuccess:e=>{console.log(e)}}),C=u.z.object({messageTypeId:u.z.string().min(1,"Please enter your message type id"),messageDate:u.z.string().min(1,"Please enter your message date"),messageStatus:u.z.string().min(1,"Please enter your message status"),messageSenderName:u.z.string().min(1,"Please enter your message sender name"),messageSenderEmail:u.z.string().min(1,"Please enter your message sender email"),messageSenderPhone:u.z.number().min(1,"Please enter your message sender phone"),messageSenderCustId:u.z.number().min(1,"Please enter your message sender cust id"),account:u.z.string().min(1,"Please select an account"),message:u.z.string().min(1,"Please enter your message")}),S=(0,o.cI)({defaultValues:{messageTypeId:"",messageDate:"",messageStatus:"",messageSenderName:"",messageSenderEmail:"",messageSenderPhone:"",messageSenderCustId:"",account:"",message:""},resolver:(0,i.F)(C)}),{handleSubmit:R,setValue:M}=S;(0,a.useEffect)(()=>{var e;(null==v?void 0:v.data)&&s&&(null==t?void 0:null===(e=t.acctCollection)||void 0===e?void 0:e.AcctStruct)&&(M("messageTypeId","MiscRequest|".concat(s)),M("messageDate",(0,r.WU)(new Date,"dd-MM-yyyy")),M("messageStatus","Pending"),M("messageSenderName",t.acctCollection.AcctStruct[1].cod_acct_title),M("messageSenderEmail",t.acctCollection.AcctStruct[1].Email),M("messageSenderPhone",t.acctCollection.AcctStruct[1].Gsm),M("messageSenderCustId",t.acctCollection.AcctStruct[1].CustomerID))},[v,s,t,M]);let D=async e=>{N({...e,messageBody:"Miscellaneous Request from User with Acct No:".concat(e.account,"|.Details are as follows: ").concat(e.message)})};return w?(0,n.jsx)(d.g,{}):(0,n.jsxs)("main",{className:"h-full w-full flex flex-col gap-6 items-center md:justify-center",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold",children:"Miscellaneous Requests"}),(0,n.jsx)(h.l0,{...S,children:(0,n.jsxs)("form",{onSubmit:R(D),className:"space-y-3 w-[90%] md:w-1/2 border border-border rounded-md p-6",children:[(0,n.jsx)(h.Wi,{control:S.control,name:"account",render:e=>{var t;let{field:s}=e;return(0,n.jsxs)(h.xJ,{children:[(0,n.jsx)(h.lX,{children:"Select Account"}),(0,n.jsx)(h.NI,{children:(0,n.jsxs)(p.Ph,{onValueChange:s.onChange,value:s.value,children:[(0,n.jsx)(p.i4,{children:(0,n.jsx)(p.ki,{placeholder:"Select Source Account"})}),(0,n.jsx)(p.Bw,{children:null==v?void 0:null===(t=v.data)||void 0===t?void 0:t.map((e,t)=>(0,n.jsxs)(p.Ql,{value:e.accountNumber,children:[e.accountNumber," -"," ",(0,x.x)(e.bookBalance)]},t))})]})}),(0,n.jsx)(h.zG,{})]})}}),(0,n.jsx)(h.Wi,{control:S.control,name:"message",render:e=>{let{field:t}=e;return(0,n.jsxs)(h.xJ,{children:[(0,n.jsx)(h.lX,{children:"Message"}),(0,n.jsx)(h.NI,{children:(0,n.jsx)(f.g,{...t,placeholder:"Enter your message",className:"resize-none"})}),(0,n.jsx)(h.zG,{})]})}}),(0,n.jsx)(m.z,{className:"w-full font-semibold mt-3",type:"submit",children:j?"...":"Submit"})]})})]})}},7651:function(e,t,s){"use strict";s.d(t,{g:function(){return a}});var n=s(7437);let a=()=>(0,n.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:(0,n.jsx)("span",{className:"animate-ping relative inline-flex rounded-full h-6 w-6 bg-primary/20"})})},6661:function(e,t,s){"use strict";s.d(t,{l0:function(){return d},NI:function(){return y},Wi:function(){return h},xJ:function(){return g},lX:function(){return x},zG:function(){return b}});var n=s(7437),a=s(2265),r=s(1538),i=s(9343),o=s(7440),u=s(8364);let c=(0,s(2218).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(u.f,{ref:t,className:(0,o.cn)(c(),s),...a})});l.displayName=u.f.displayName;let d=i.RV,m=a.createContext({}),h=e=>{let{...t}=e;return(0,n.jsx)(m.Provider,{value:{name:t.name},children:(0,n.jsx)(i.Qr,{...t})})},f=()=>{let e=a.useContext(m),t=a.useContext(p),{getFieldState:s,formState:n}=(0,i.Gc)(),r=s(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=t;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...r}},p=a.createContext({}),g=a.forwardRef((e,t)=>{let{className:s,...r}=e,i=a.useId();return(0,n.jsx)(p.Provider,{value:{id:i},children:(0,n.jsx)("div",{ref:t,className:(0,o.cn)("space-y-2",s),...r})})});g.displayName="FormItem";let x=a.forwardRef((e,t)=>{let{className:s,...a}=e,{error:r,formItemId:i}=f();return(0,n.jsx)(l,{ref:t,className:(0,o.cn)(r&&"text-destructive",s),htmlFor:i,...a})});x.displayName="FormLabel";let y=a.forwardRef((e,t)=>{let{...s}=e,{error:a,formItemId:i,formDescriptionId:o,formMessageId:u}=f();return(0,n.jsx)(r.g7,{ref:t,id:i,"aria-describedby":a?"".concat(o," ").concat(u):"".concat(o),"aria-invalid":!!a,...s})});y.displayName="FormControl",a.forwardRef((e,t)=>{let{className:s,...a}=e,{formDescriptionId:r}=f();return(0,n.jsx)("p",{ref:t,id:r,className:(0,o.cn)("text-sm text-muted-foreground",s),...a})}).displayName="FormDescription";let b=a.forwardRef((e,t)=>{let{className:s,children:a,...r}=e,{error:i,formMessageId:u}=f(),c=i?String(null==i?void 0:i.message):a;return c?(0,n.jsx)("p",{ref:t,id:u,className:(0,o.cn)("text-sm font-medium text-destructive",s),...r,children:c}):null});b.displayName="FormMessage"},6294:function(e,t,s){"use strict";s.d(t,{Bw:function(){return p},Ph:function(){return l},Ql:function(){return g},i4:function(){return m},ki:function(){return d}});var n=s(7437),a=s(2265),r=s(4357),i=s(2421),o=s(4392),u=s(2468),c=s(7440);let l=r.fC;r.ZA;let d=r.B4,m=a.forwardRef((e,t)=>{let{className:s,children:a,...o}=e;return(0,n.jsxs)(r.xz,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...o,children:[a,(0,n.jsx)(r.JO,{asChild:!0,children:(0,n.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=r.xz.displayName;let h=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(r.u_,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...a,children:(0,n.jsx)(o.Z,{className:"h-4 w-4"})})});h.displayName=r.u_.displayName;let f=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(r.$G,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...a,children:(0,n.jsx)(i.Z,{className:"h-4 w-4"})})});f.displayName=r.$G.displayName;let p=a.forwardRef((e,t)=>{let{className:s,children:a,position:i="popper",...o}=e;return(0,n.jsx)(r.h_,{children:(0,n.jsxs)(r.VY,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:i,...o,children:[(0,n.jsx)(h,{}),(0,n.jsx)(r.l_,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,n.jsx)(f,{})]})})});p.displayName=r.VY.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(r.__,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...a})}).displayName=r.__.displayName;let g=a.forwardRef((e,t)=>{let{className:s,children:a,...i}=e;return(0,n.jsxs)(r.ck,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(r.wU,{children:(0,n.jsx)(u.Z,{className:"h-4 w-4"})})}),(0,n.jsx)(r.eT,{children:a})]})});g.displayName=r.ck.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(r.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",s),...a})}).displayName=r.Z0.displayName},3146:function(e,t,s){"use strict";s.d(t,{g:function(){return i}});var n=s(7437),a=s(2265),r=s(7440);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...a})});i.displayName="Textarea"},4194:function(e,t,s){"use strict";s.d(t,{U:function(){return u}});var n=s(903);let a=(e,t,s)=>{let n=new Date(new Date().getTime()+1e3*(s||14400)),a="expires=".concat(n.toUTCString()),r="".concat(e,"=").concat(t,"; ").concat(a,"; path=/");document.cookie=r},r=e=>{let t=("undefined"!=typeof document?decodeURIComponent(document.cookie):"").split(";");for(let s=0;s<t.length;s++){let n=t[s].trim();if(n.startsWith("".concat(e,"=")))return n.substring(e.length+1)}return null},i=e=>{document.cookie="".concat(e,"=; Max-Age=",0,"; path=/;")},o=e=>{if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},u=(0,n.U)()(e=>({userData:o(r("nomase_user"))||null,setUserData:t=>e({userData:t}),appData:o(r("nomase_app"))||null,setAppData:t=>e({appData:t}),menuControlData:o(r("nomase_menu"))||null,setMenuControlData:t=>e({menuControlData:t}),mainMenuData:o(r("nomase_main"))||null,setMainMenuData:t=>e({mainMenuData:t}),accessCode:o(r("nomase_access"))||"",setAccessCode:t=>{e({accessCode:t}),a("nomase_access",JSON.stringify(t))},login:t=>{e(()=>({userData:t}));let s=t.UserRec,n=t.AcctCollection,r=t.cod_prod,i=t.CompanyUsers,o=t.AcctBlocks,u=t.mMenuControls,c=t.xMainMenu,l=t.pLimitsObject;a("nomase_app",JSON.stringify({codProd:r,companyUsers:i,menuControls:u,acctBlocks:o})),a("nomase_user",JSON.stringify({userRec:s,acctCollection:n,pLimitsObject:l})),a("nomase_main",JSON.stringify({xMainMenu:c})),location.href="/dashboard"},logout:()=>{e(()=>({userData:null,appData:null,menuControlData:null,mainMenuData:null})),i("nomase_user"),i("nomase_app"),i("nomase_main"),location.href="/"}}))},4058:function(e,t,s){"use strict";s.d(t,{x:function(){return n}});let n=e=>parseFloat(e).toLocaleString("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:2})},2812:function(e,t,s){"use strict";s.d(t,{R:function(){return o},m:function(){return i}});var n=s(9948),a=s(3494),r=s(924),i=class extends a.F{#e;#t;#s;constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#e=[],this.state=e.state||o(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(t=>t!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||("pending"===this.state.status?this.scheduleGc():this.#t.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){this.#s=(0,r.Mz)({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(Error("No mutationFn found")),onFail:(e,t)=>{this.#n({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});let t="pending"===this.state.status,s=!this.#s.canStart();try{if(!t){this.#n({type:"pending",variables:e,isPaused:s}),await this.#t.config.onMutate?.(e,this);let t=await this.options.onMutate?.(e);t!==this.state.context&&this.#n({type:"pending",context:t,variables:e,isPaused:s})}let n=await this.#s.start();return await this.#t.config.onSuccess?.(n,e,this.state.context,this),await this.options.onSuccess?.(n,e,this.state.context),await this.#t.config.onSettled?.(n,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(n,null,e,this.state.context),this.#n({type:"success",data:n}),n}catch(t){try{throw await this.#t.config.onError?.(t,e,this.state.context,this),await this.options.onError?.(t,e,this.state.context),await this.#t.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,t,e,this.state.context),t}finally{this.#n({type:"error",error:t})}}finally{this.#t.runNext(this)}}#n(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),n.V.batch(()=>{this.#e.forEach(t=>{t.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function o(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}},5524:function(e,t,s){"use strict";s.d(t,{D:function(){return d}});var n=s(2265),a=s(2812),r=s(9948),i=s(9010),o=s(6298),u=class extends i.l{#a;#r=void 0;#i;#o;constructor(e,t){super(),this.#a=e,this.setOptions(t),this.bindMethods(),this.#u()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#a.defaultMutationOptions(e),(0,o.VS)(this.options,t)||this.#a.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#i,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,o.Ym)(t.mutationKey)!==(0,o.Ym)(this.options.mutationKey)?this.reset():this.#i?.state.status==="pending"&&this.#i.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#i?.removeObserver(this)}onMutationUpdate(e){this.#u(),this.#c(e)}getCurrentResult(){return this.#r}reset(){this.#i?.removeObserver(this),this.#i=void 0,this.#u(),this.#c()}mutate(e,t){return this.#o=t,this.#i?.removeObserver(this),this.#i=this.#a.getMutationCache().build(this.#a,this.options),this.#i.addObserver(this),this.#i.execute(e)}#u(){let e=this.#i?.state??(0,a.R)();this.#r={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#c(e){r.V.batch(()=>{if(this.#o&&this.hasListeners()){let t=this.#r.variables,s=this.#r.context;e?.type==="success"?(this.#o.onSuccess?.(e.data,t,s),this.#o.onSettled?.(e.data,null,t,s)):e?.type==="error"&&(this.#o.onError?.(e.error,t,s),this.#o.onSettled?.(void 0,e.error,t,s))}this.listeners.forEach(e=>{e(this.#r)})})}},c=s(3191),l=s(7832);function d(e,t){let s=(0,c.NL)(t),[a]=n.useState(()=>new u(s,e));n.useEffect(()=>{a.setOptions(e)},[a,e]);let i=n.useSyncExternalStore(n.useCallback(e=>a.subscribe(r.V.batchCalls(e)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),o=n.useCallback((e,t)=>{a.mutate(e,t).catch(l.Z)},[a]);if(i.error&&(0,l.L)(a.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:o,mutateAsync:i.mutate}}}},function(e){e.O(0,[8218,4868,9300,4469,6059,2576,5815,7860,6235,8415,2971,7023,1744],function(){return e(e.s=1392)}),_N_E=e.O()}]);